import google.generativeai as genai

# ПРЕДУПРЕЖДЕНИЕ: Этот способ небезопасен для публичного кода!
# Ваш API ключ виден всем, кто имеет доступ к этому файлу.
# AIzaSyC95EiaCgY0zwW1JTWz4Ip2xfsO8DVmh5Q" # Я закомментировал ключ для безопасности
API_KEY = "AIzaSyC95EiaCgY0zwW1JTWz4Ip2xfsO8DVmh5Q" 

description = """\"""Купалье\" (16+)\nбалет в 2-х действиях\nкомпозитор Елизавета Лобан,\nхореограф-постановщик – главный балетмейстер труппы классического балета, лауреат международных конкурсов и Национальной театральной премии – Сергей Микель,\nдирижёр-постановщик – Марина Третьякова,\nдирижёр – лауреат международных конкурсов, главный дирижёр театра – Юрий Галяс,\nхудожник-постановщик (сценография) – Евгений Ермолович\nхудожник-постановщик (костюмы) – Илья Подкопаев.\nКупалье – время, когда вымысел и реальность переплетаются в единое целое, когда с большим желанием верится в чудеса, и можно 
отправиться на поиски приключений. Принимать участие в этом празднике – значит прикоснуться к страницам нашей богатой истории, ощутить свою принадлежность к древним корням.\nМагические обряды и ритуалы Купалья возникли ещё в языческие времена. \"Купало\" означало \"сердитое\", \"горячее\", \"кипящее гневом\", \"ярое\" – именно так предки представляли солнце и его чудодейственную силу.\nКаждая часть 
балета будет рассказывать о разных стихиях, о взаимоотношениях человека и природы, ритуалах, символике, магии и чуде купальской ночи.\nНаш новый балет – возобновление древней традиции. Возвращение к корням. Отражение первобытных ритуальных мистерий.\nОдна из главных целей спектакля – прикоснуться к самым глубоким слоям и смыслам, которые наши предки закладывали в празднование Купалья. Отказ от детской сказочности, которая навязчиво интерпретируется в современном искусстве.\nБалет \"Купалье\" – это и обращение к психологической, природной магии и символике, попытка воссоздать ритуал и его основной смысл, передать отношение человека к языческому празднику в его первозданном виде, отказ от условных рамок и стереотипов, окутывающих сакральную ночь.\nБалет будет насыщен различными мифологическими существами, здесь будут и Невры, и мифические существа, олицетворяющие образы Воды, Огня и Земли."""

async def getArtist(description: str) -> list: # Добавил type hint для наглядности
    
    artists = []
    try:
        genai.configure(api_key=API_KEY)
        model = genai.GenerativeModel('gemini-2.5-flash') # Используем flash, он быстрее и дешевле для таких задач
        
        prompt = f"Из этого текста вычлени только имена и фамилии людей, которые являются артистами, композиторами, дирижерами или постановщиками. Ответь списком через запятую. Если никого нет, оставь ответ пустым. Текст: {description}"
        response = await model.generate_content_async(prompt)

        # Обрабатываем ответ
        if response.text:
            for artist in response.text.split(','):
                clean_artist = artist.strip().lower()
                if clean_artist: # Добавляем, только если строка не пустая после очистки
                    artists.append(clean_artist)
        
        return artists # <--- ИЗМЕНЕНИЕ 1: Возвращаем готовый список

    except Exception as e:
        print(f"Произошла ошибка: {e}")
        return [] # В случае ошибки возвращаем пустой список

# --- ОСНОВНОЙ БЛОК ---

# <--- ИЗМЕНЕНИЕ 2: Вызываем функцию, сохраняем результат и выводим его
# artist_list = getArtist(description)

# print("Найденные артисты:")
# print(artist_list)